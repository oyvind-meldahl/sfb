<!DOCTYPE html>
<html lang="no">
<head>
  <title>Bestillingsskjema</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    

  <div class="container mt-5">

    <!-- Buttons to switch between "Websider" and "Pakker" -->
    <div class="text-center mb-5">
      <button id="websiderBtn" class="btn btn-primary">Nettsider</button>
      <button id="pakkerBtn" class="btn btn-primary">Pakker</button>
    </div>

    <!-- Form for "Websider" -->
    <form id="orderForm" name="orderForm" method="post" data-netlify="true">
        <div id="websiderSection">
      <div class="row my-3">
        <label for="product1">Produkt 1</label>
        <input type="number" name="product1" id="product1" min="0" placeholder="0" class="mx-5">
        <input type="text" name="product1text" id="product1text" placeholder="Kommentarer til bestillingen her" style="width: 50%;">
      </div>
      <div class="row my-3">
        <label for="product2">Produkt 2</label>
        <input type="number" name="product2" id="product2" min="0" placeholder="0" class="mx-5">
        <input type="text" name="product2text" id="product2text" placeholder="Kommentarer til bestillingen her" style="width: 50%;">
      </div>
        </div>
      
    

    <!-- Form for "Pakker" -->
    <div id="pakkerSection" style="display: none;">
      <div class="row my-3">
        <label for="package1">Pakke 1</label>
        <input type="number" name="package1" id="package1" min="0" placeholder="0" class="mx-5">
        <input type="text" name="package1text" id="package1text" placeholder="Kommentarer til bestillingen her" style="width: 50%;">
      </div>
      <div class="row my-3">
        <label for="package2">Pakke 2</label>
        <input type="number" name="package2" id="package2" min="0" placeholder="0" class="mx-5">
        <input type="text" name="package2text" id="package2text" placeholder="Kommentarer til bestillingen her" style="width: 50%;">
      </div>
    </div>

    <button id="sendEmailBtn" class="btn btn-success" type="submit">Send Bestilling</button>
    </form>

<!-- Email send button -->


    <div class="total my-5">
      <h2>Total sum:</h2><span id="total-value">0</span>,-
    </div>
  </div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.sendgrid.com/docs/Static/docs.min.js"></script>
  
  
  
  
  <script>

function removeEmptyFieldsOnSubmit(event) {
    // Loop through all input fields in the form
    for (const input of document.querySelectorAll("#orderForm input")) {
        // If the input field is empty, disable it to prevent its inclusion in the form data
        if (input.value.trim() === "") {
            input.setAttribute("disabled", "disabled");
        }
    }
}


const orderForm = document.getElementById("orderForm");

orderForm.addEventListener("submit", removeEmptyFieldsOnSubmit);


let total = 0;

// Function to calculate and update the total
function calculateTotal() {
    total = 0;
    for (const input of document.querySelectorAll("#orderForm input[type='number']")) {
        total += Number(input.value);
    }
    const formattedTotal = total.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    document.getElementById("total-value").innerHTML = formattedTotal;
}

// Function to switch between "Websider" and "Pakker" sections
function switchSection(sectionId) {
    if (sectionId === "websiderSection") {
        document.getElementById("websiderSection").style.display = "block";
        document.getElementById("pakkerSection").style.display = "none";
    } else {
        document.getElementById("websiderSection").style.display = "none";
        document.getElementById("pakkerSection").style.display = "block";
    }
    calculateTotal();
}

// Button event listeners to toggle between "Websider" and "Pakker"
const websiderBtn = document.getElementById("websiderBtn");
const pakkerBtn = document.getElementById("pakkerBtn");

websiderBtn.addEventListener("click", () => {
    switchSection("websiderSection");
});

pakkerBtn.addEventListener("click", () => {
    switchSection("pakkerSection");
});

// Input event listeners to update the total in real-time
const inputFields = document.querySelectorAll("#orderForm input[type='number']");

for (const inputField of inputFields) {
    inputField.addEventListener("input", calculateTotal);
}

  </script>

</body>
</html>


